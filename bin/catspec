#!/bin/sh

usage() {
	local myName=$(basename "${0}")
	echo ${myName}: echo to STDOUT a .spec of a given rpm package
	echo
	echo Usage: ${myName} rpm
	echo
}

get_url () {
	[ "$(basename "${1}")" == "${1}" ] && yumdownloader --debuglevel 0 --source --urls "${1}" | wget -i - -O - -q || wget -O - -q "${1}"
}

[ $# -ne 1 ] && {
	usage >&2
	exit 1
}

rpm=${1}
[ -f "${rpm}" ] && _cmd=cat || _cmd=get_url
${_cmd} "${rpm}" | rpm2cpio | cpio -i --quiet --to-stdout '*.spec' | ${PAGER-less}
